generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model CatalogCategory {
  id              String              @id @default(uuid()) @db.VarChar(191)
  slug            String              @unique @db.VarChar(191)
  name            String              @db.VarChar(191)
  headline        String?             @db.Text
  description     String?             @db.Text
  heroImage       String?             @map("hero_image") @db.VarChar(191)
  heroAlt         String?             @map("hero_alt") @db.VarChar(191)
  seoTitle        String?             @map("seo_title") @db.VarChar(191)
  seoDescription  String?             @map("seo_description") @db.VarChar(191)
  position        Int                 @default(0)
  createdAt       DateTime            @default(now()) @map("created_at")
  updatedAt       DateTime            @updatedAt @map("updated_at")

  highlights      CategoryHighlight[]
  products        Product[]

  @@map("catalog_categories")
}

model CategoryHighlight {
  id         Int             @id @default(autoincrement())
  categoryId String          @map("category_id") @db.VarChar(191)
  text       String          @db.VarChar(255)

  category   CatalogCategory @relation(fields: [categoryId], references: [id], onDelete: Cascade)

  @@index([categoryId])
  @@map("category_highlights")
}

model Product {
  id             String                @id @default(uuid()) @db.VarChar(191)
  slug           String                @unique @db.VarChar(191)
  categoryId     String                @map("category_id") @db.VarChar(191)
  name           String                @db.VarChar(191)
  summary        String?               @db.Text
  description    String?               @db.Text
  designer       String?               @db.VarChar(191)
  dimensions     String?               @db.VarChar(191)
  lightSource    String?               @map("light_source") @db.VarChar(191)
  leadTime       String?               @map("lead_time") @db.VarChar(191)
  warranty       String?               @db.VarChar(191)
  createdAt      DateTime              @default(now()) @map("created_at")
  updatedAt      DateTime              @updatedAt @map("updated_at")

  category       CatalogCategory       @relation(fields: [categoryId], references: [id], onDelete: Cascade)
  media          ProductMedia[]
  assets         ProductAsset[]
  materials      ProductMaterial[]
  finishOptions  ProductFinishOption[]
  customizations ProductCustomization[]

  @@index([categoryId])
  @@map("products")
}

model ProductMedia {
  id        Int     @id @default(autoincrement())
  productId String  @map("product_id") @db.VarChar(191)
  position  Int
  src       String  @db.VarChar(191)
  alt       String? @db.VarChar(191)

  product   Product @relation(fields: [productId], references: [id], onDelete: Cascade)

  @@unique([productId, position])
  @@index([productId])
  @@map("product_media")
}

model ProductMaterial {
  id        Int     @id @default(autoincrement())
  productId String  @map("product_id") @db.VarChar(191)
  name      String  @db.VarChar(191)

  product   Product @relation(fields: [productId], references: [id], onDelete: Cascade)

  @@index([productId])
  @@map("product_materials")
}

model ProductFinishOption {
  id        Int     @id @default(autoincrement())
  productId String  @map("product_id") @db.VarChar(191)
  name      String  @db.VarChar(191)

  product   Product @relation(fields: [productId], references: [id], onDelete: Cascade)

  @@index([productId])
  @@map("product_finish_options")
}

model ProductCustomization {
  id        Int     @id @default(autoincrement())
  productId String  @map("product_id") @db.VarChar(191)
  description String @db.VarChar(191)

  product   Product @relation(fields: [productId], references: [id], onDelete: Cascade)

  @@index([productId])
  @@map("product_customizations")
}

model ProductAsset {
  id          Int      @id @default(autoincrement())
  productId   String   @map("product_id") @db.VarChar(191)
  type        String   @db.VarChar(100)
  url         String   @db.VarChar(191)
  title       String?  @db.VarChar(191)
  description String?  @db.VarChar(191)
  createdAt   DateTime @default(now()) @map("created_at")
  updatedAt   DateTime @updatedAt @map("updated_at")

  product Product @relation(fields: [productId], references: [id], onDelete: Cascade)

  @@index([productId])
  @@map("product_assets")
}

model AdminUser {
  id           String   @id @default(uuid()) @db.VarChar(191)
  email        String   @unique @db.VarChar(191)
  passwordHash String   @map("password_hash") @db.VarChar(191)
  createdAt    DateTime @default(now()) @map("created_at")
  updatedAt    DateTime @updatedAt @map("updated_at")

  @@map("admin_users")
}
